import{b as u,u as m,c as h,d as x,j as e,P as p,C as l,T as i,B as g,e as f,V as j}from"./index-BGVyTCu4.js";import{a as b}from"./zod-B7ebBz78.js";const y=()=>{const a=u({onSuccess:s=>{j.success("Đăng nhập thành công.",{duration:3e3})}}),{signIn:o}=m(),{handleSubmit:d,control:r,formState:{errors:t}}=h({resolver:b(x),defaultValues:{username:"",password:""}}),c=async s=>{try{if(a.isPending)return;const n=await a.mutateAsync(s);o(s.username,{accessToken:n.token+"",refreshToken:""})}catch(n){console.error("LoginView onSubmit error",n)}};return e.jsx("div",{className:"my-auto w-full",children:e.jsxs(p,{elevation:4,className:"w-full md:w-2/3 p-8 rounded-2xl shadow-lg",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Hệ thống quản lý bệnh án điện tử"})}),e.jsxs("form",{className:"space-y-6 flex flex-col gap-2",onSubmit:d(c),children:[e.jsxs("div",{children:[e.jsx(l,{control:r,name:"username",render:({field:{onChange:s,value:n}})=>e.jsx(i,{label:"Tên đăng nhập",type:"text",fullWidth:!0,variant:"outlined",onChange:s,value:n})}),t.username&&e.jsx("span",{className:"text-red-500",children:t.username.message})]}),e.jsxs("div",{children:[e.jsx(l,{control:r,name:"password",render:({field:{onChange:s,value:n}})=>e.jsx(i,{label:"Mật khẩu",type:"password",fullWidth:!0,variant:"outlined",onChange:s,value:n})}),t.password&&e.jsx("span",{className:"text-red-500",children:t.password.message})]}),a.failureReason&&e.jsx("span",{className:"text-red-500",children:a.failureReason+""}),e.jsx(g,{disabled:a.isPending,type:"submit",variant:"contained",fullWidth:!0,className:"!mt-2 !bg-blue-600 hover:!bg-blue-700 !text-white",children:"Đăng nhập"})]}),e.jsx("div",{className:"mt-4 text-sm text-center hidden",children:e.jsxs(f,{variant:"body2",children:["Không có tài khoản? ",e.jsx("a",{href:"#",className:"text-blue-500 hover:underline",children:"Đăng ký"})]})})]})})};export{y as LoginView};
