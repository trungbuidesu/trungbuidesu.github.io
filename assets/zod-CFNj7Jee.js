import{W as h,X as l,Y as j,Z as V,$ as _,_ as E}from"./index-4NPSZKqw.js";const v=(n,o,r)=>{if(n&&"reportValidity"in n){const e=h(r,o);n.setCustomValidity(e&&e.message||""),n.reportValidity()}},m=(n,o)=>{for(const r in o.fields){const e=o.fields[r];e&&e.ref&&"reportValidity"in e.ref?v(e.ref,r,n):e&&e.refs&&e.refs.forEach(t=>v(t,r,n))}},p=(n,o)=>{o.shouldUseNativeValidation&&m(n,o);const r={};for(const e in n){const t=h(o.fields,e),i=Object.assign(n[e]||{},{ref:t&&t.ref});if(b(o.names||Object.keys(n),e)){const s=Object.assign({},h(r,e));l(s,"root",i),l(r,e,s)}else l(r,e,i)}return r},b=(n,o)=>{const r=y(o);return n.some(e=>y(e).match(`^${r}\\.\\d+`))};function y(n){return n.replace(/\]|\[/g,"")}function g(n,o){try{var r=n()}catch(e){return o(e)}return r&&r.then?r.then(void 0,o):r}function w(n,o){for(var r={};n.length;){var e=n[0],t=e.code,i=e.message,s=e.path.join(".");if(!r[s])if("unionErrors"in e){var a=e.unionErrors[0].errors[0];r[s]={message:a.message,type:a.code}}else r[s]={message:i,type:t};if("unionErrors"in e&&e.unionErrors.forEach(function(f){return f.errors.forEach(function(d){return n.push(d)})}),o){var c=r[s].types,u=c&&c[e.code];r[s]=E(s,o,r,t,u?[].concat(u,e.message):e.message)}n.shift()}return r}function N(n,o){for(var r={};n.length;){var e=n[0],t=e.code,i=e.message,s=e.path.join(".");if(!r[s])if(e.code==="invalid_union"&&e.errors.length>0){var a=e.errors[0][0];r[s]={message:a.message,type:a.code}}else r[s]={message:i,type:t};if(e.code==="invalid_union"&&e.errors.forEach(function(f){return f.forEach(function(d){return n.push(d)})}),o){var c=r[s].types,u=c&&c[e.code];r[s]=E(s,o,r,t,u?[].concat(u,e.message):e.message)}n.shift()}return r}function O(n,o,r){if(r===void 0&&(r={}),function(e){return"_def"in e&&typeof e._def=="object"&&"typeName"in e._def}(n))return function(e,t,i){try{return Promise.resolve(g(function(){return Promise.resolve(n[r.mode==="sync"?"parse":"parseAsync"](e,o)).then(function(s){return i.shouldUseNativeValidation&&m({},i),{errors:{},values:r.raw?Object.assign({},e):s}})},function(s){if(function(a){return Array.isArray(a?.issues)}(s))return{values:{},errors:p(w(s.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw s}))}catch(s){return Promise.reject(s)}};if(function(e){return"_zod"in e&&typeof e._zod=="object"}(n))return function(e,t,i){try{return Promise.resolve(g(function(){return Promise.resolve((r.mode==="sync"?j:V)(n,e,o)).then(function(s){return i.shouldUseNativeValidation&&m({},i),{errors:{},values:r.raw?Object.assign({},e):s}})},function(s){if(function(a){return a instanceof _}(s))return{values:{},errors:p(N(s.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw s}))}catch(s){return Promise.reject(s)}};throw new Error("Invalid input: not a Zod schema")}export{O as a};
